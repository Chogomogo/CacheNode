- name: Set up gcloud with WIF
  id: gcp-auth
  uses: google-github-actions/setup-gcloud@v2
  with:
    project_id: clientgcp-462908
    workload_identity_provider: ${{ secrets.WIF_PROVIDER }}
    service_account_email: gh-runner@clientgcp-462908.iam.gserviceaccount.com
    export_default_credentials: true

- run: |
    echo "Active account:"
    gcloud auth list --filter="STATUS:ACTIVE"
    echo "ADC file path: ${{ steps.gcp-auth.outputs.credentials_file_path }}"
